encoding is still using string instead of bytes, inefficient and should be replaced.
